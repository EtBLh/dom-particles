!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("letterbomb",[],e):"object"==typeof exports?exports.letterbomb=e():t.letterbomb=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_PARTICLE_OPTIONS=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(1),l=e.DEFAULT_PARTICLE_OPTIONS={velocity:{x:0,y:0},acceleration:{x:0,y:0},heading:0,ttl:1e3,text:".",grid:!1,style:{},onCreate:function(){},onUpdate:function(){}},c=function(){function t(e){r(this,t),Object.assign(this,a({},l,e)),this.elapsed=0,this.frameNumber=0,this.updateTransform=this.grid?this.updateGridTransform:this.updateTransform,this.element.style.opacity=1,this.setText(this.text),this.buildStyles(this.style),this.nextStyles=this.getStyleSnapshot(),this.onCreate(this),Object.assign(this.element.style,this.nextStyles)}return s(t,[{key:"buildStyles",value:function(t){var e={},n={};Object.keys(t).map(function(i){var r=t[i];Array.isArray(r)?1===r.length?e[i]=r:n[i]=(0,u.styleValueToFunction)(r):"object"===(void 0===r?"undefined":o(r))||(e[i]=r)}),this.dynamicStyles=n,this.fixedStyles=e}},{key:"setText",value:function(t){this.element.innerText=t}},{key:"getStyleSnapshot",value:function(){var t=this,e=this.lifeFrac,n=Object.keys(this.dynamicStyles).reduce(function(n,r){var o=t.dynamicStyles[r];return a({},n,i({},r,o(e)))},a({},this.fixedStyles));return a({},n,{transform:this.getScaledTransform(n)})}},{key:"getScaledTransform",value:function(t){var e=t.scaleX,n=t.scaleY,i=t.scale;return i=i||1,e=e||i,n=n||i,this.getTransform(e,n)}},{key:"getTransform",value:function(t,e){return"translate3d("+this.position.x+"px, "+this.position.y+"px, 0) rotateZ("+this.heading+"rad) scale("+t+", "+e+")"}},{key:"getGridTransform",value:function(t,e){return"translate3d("+(this.position.x-this.position.x%this.grid)+"px, "+(this.position.y-this.position.y%this.grid)+"px, 0) rotateZ("+this.heading+"rad) scale("+this.scale.x+", "+this.scale.y+")"}},{key:"update",value:function(t){this.elapsed+=1e3*t,this.velocity.x+=this.acceleration.x*t,this.velocity.y+=this.acceleration.y*t,this.position.x+=this.velocity.x*t,this.position.y+=this.velocity.y*t,this.nextStyles=this.getStyleSnapshot(),this.onUpdate(this),Object.assign(this.element.style,this.nextStyles),this.frameNumber++}},{key:"alive",get:function(){return this.elapsed<this.ttl}},{key:"lifeFrac",get:function(){return this.elapsed/this.ttl}}]),t}();e.default=c},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,a=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([01](?:\.\d+)*)\s*\)/,s=/#([0-9a-f]{1,2})([0-9a-f]{1,2})([0-9a-f]{1,2})/,u=/(\d+\.\d+|\d+)([a-z]+)?/,l=e.rgbToNumbers=function(t){try{var e=o.exec(t),n=r(e,4);n[0];return[].concat(i([n[1],n[2],n[3]].map(function(t){return parseInt(t)})),[1])}catch(t){return console.log(t),!1}},c=e.rgbaToNumbers=function(t){try{var e=a.exec(t),n=r(e,5);n[0];return[n[1],n[2],n[3],n[4]].filter(function(t){return t}).map(function(t){return parseInt(t)})}catch(t){return console.log(t),!1}},h=e.hexToNumbers=function(t){try{var e=s.exec(t),n=r(e,4);n[0];return[].concat(i([n[1],n[2],n[3]].map(function(t){return parseInt(t,16)*(1===t.length?17:1)})),[1])}catch(t){return console.log(t),!1}},f=e.valueToNumberAndUnit=function(t){var e=u.exec(t),n=r(e,3),i=(n[0],n[1]),o=n[2];return[parseInt(i),o||""]},p=e.tryGetValue=function(t){switch(t[0]){case"#":return h(t);case"r":return("a"===t[3]?c:l)(t);default:return f(t)}},y=e.colourToCSSString=function(t){var e=r(t,4);return"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},d=e.valueToCSSString=function(t,e){return""+t+e},m=e.lerp=function(t,e,n){return t+(e-t)*n},v=e.easeArray=function(t,e,n){var i=n*(t.length-1),r=Math.min(Math.floor(i),t.length-1),o=Math.min(r+1,t.length-1);return e(t[r],t[o],i%1)},b=e.transpose=function(t){return t[0].map(function(e,n){return t.map(function(t){return t[n]})})};e.styleValueToFunction=function(t){var e=t.map(function(t){return p(t)});if(2===e[0].length){var n=e[0][1],i=e.map(function(t){return t[0]});return function(t){return d(v(i,m,t),n)}}var r=b(e);return function(t){return y(r.map(function(e){return v(e,m,t)}))}},e.buildOffsets=function(t,e){var n=[],i=void 0,r=void 0;do{if(i=e.exec(t)){var o=i.index;o>r+1&&n.push([r+1,o-1]);var a=i.index+i[0].length;n.push([i.index,a]),r=a}}while(i);return n},e.positionFromNode=function(t,e,n){var i=t.getBoundingClientRect();return{x:i.x+e,y:i.y+n}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),u=i(s),l=n(3),c=i(l),h=n(1),f={max:100,preallocate:10,tagName:"span",autoStart:!0},p=function(){function t(e){r(this,t),Object.assign(this,o({},f,e)),this._pool=[],this.particles=[],this.emitters=[],this.foldElement=document.createElement("div"),this.foldElement.className="text-particle-manager-reservoir",Object.assign(this.foldElement.style,{width:0,height:0,position:"absolute",top:0,left:0}),this.allocate(this.preallocate),document.body.appendChild(this.foldElement),this.out=document.querySelector("p"),this.frameStart=null}return a(t,[{key:"start",value:function(){var t=this;this.raf=requestAnimationFrame(function(e){return t.update(e)})}},{key:"update",value:function(t){var e=this;this.frameStart||(this.frameStart=t);var n=t-this.frameStart;this.frameStart=t;var i=n/1e3;this.particles=this.particles.filter(function(t){return t.update(i),!!t.alive||(t.element.style.opacity=0,e.push(t.element),!1)}),this.out.innerText=this.particles.length,this.emitters=this.emitters.filter(function(t){return t.update(i),t.alive}),0===this.emitters.length&&0===this.particles.length?(cancelAnimationFrame(this.raf),this.raf=!1):requestAnimationFrame(function(t){return e.update(t)})}},{key:"addParticle",value:function(t){if(this.particles.length<this.max){var e=this.particles.push(new u.default(o({},t,{element:this.pop()})));return!this.raf&&this.autoStart&&this.start(),e}}},{key:"addEmitter",value:function(t){var e=this.emitters.push(new c.default(o({},t,{manager:this})));return!this.raf&&this.autoStart&&this.start(),e}},{key:"from",value:function(t,e,n){(0,h.buildOffsets)(t.innerText,e)}},{key:"push",value:function(t){this._pool.push(t)}},{key:"pop",value:function(t){return this._pool.length>0?this._pool.pop():this.create()}},{key:"create",value:function(){var t=document.createElement(this.tagName);return Object.assign(t.style,{display:"block",position:"absolute",pointerEvents:"none",transform:"translate3d(0,0,0)",opacity:0}),this.foldElement.appendChild(t),t}},{key:"allocate",value:function(t){if(this._pool.length<t)for(var e=this._pool.length;e<t;e++)this.push(this.create())}}]),t}();e.default=p},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=n(0),s={emitEvery:500,position:{x:0,y:0},velocity:{x:0,y:0},acceleration:{x:0,y:0},onCreate:function(){},onUpdate:function(){},particleOptions:o({position:{x:0,y:0}},a.DEFAULT_PARTICLE_OPTIONS),MAX_EMIT_PER_STEP:10},u=function(){function t(e){i(this,t),Object.assign(this,o({},s,e)),this.manager=e.manager,this.totalElapsed=0,this.elapsed=this.emitEvery,this.emitted=0,this.onCreate(this)}return r(t,[{key:"update",value:function(t){if(this.velocity.x+=this.acceleration.x*t,this.velocity.y+=this.acceleration.y*t,this.position.x+=this.velocity.x*t,this.position.y+=this.velocity.y*t,this.elapsed+=1e3*t,this.totalElapsed+=1e3*t,this.elapsed>this.emitEvery){var e=Math.floor(this.elapsed/this.emitEvery);e=Math.min(e,this.MAX_EMIT_PER_STEP),this.maxEmissions&&(e=Math.min(this.maxEmissions-this.emitted,e)),this.elapsed=0;for(var n=0;n<e;n++){this.emitted++;var i=this.particleOptions.position||{x:0,y:0},r={x:this.position.x+i.x,y:this.position.y+i.y};this.manager.addParticle(o({},this.particleOptions,{position:r}))}}this.onUpdate(this)}},{key:"alive",get:function(){return!(this.maxEmissions&&this.emitted>=this.maxEmissions)&&!(this.ttl&&this.totalElapsed>=this.ttl)}}]),t}();e.default=u}])});